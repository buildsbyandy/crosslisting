{% extends "base.html" %}

{% block title %}{{ operation }} Result - Canvas Cross-Listing Tool{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="text-center mb-4">
            {% if success %}
            <div class="alert alert-success" role="alert">
                <h4 class="alert-heading">
                    <i class="bi bi-check-circle"></i> {{ operation }} Successful!
                </h4>
                <p class="mb-0">{{ message }}</p>
            </div>
            {% else %}
            <div class="alert alert-danger" role="alert">
                <h4 class="alert-heading">
                    <i class="bi bi-x-circle"></i> {{ operation }} Failed
                </h4>
                <p class="mb-0">{{ message }}</p>
            </div>
            {% endif %}
        </div>

        {% if success and operation == "Cross-list" %}
        <div class="alert alert-info mb-4" role="alert">
            <i class="bi bi-info-circle"></i>
            <strong>Crosslisting complete.</strong> You can crosslist more courses below or undo the action from the table.
        </div>
        {% endif %}

        <div class="text-center">
            {% if success and instructor_id and term_id %}
            <form action="{{ url_for('view_courses') }}" method="post" style="display: inline;">
                <input type="hidden" name="user_id" value="{{ instructor_id }}">
                <input type="hidden" name="term_id" value="{{ term_id }}">
                <input type="hidden" name="user_name" value="">
                <button type="submit" class="btn btn-primary me-2">
                    <i class="bi bi-arrow-left"></i> Back to Courses
                </button>
            </form>
            {% else %}
            <a href="javascript:history.back()" class="btn btn-primary me-2">‚Üê Go Back</a>
            {% endif %}
            <a href="{{ url_for('home') }}" class="btn btn-outline-secondary">Home</a>
        </div>

        {% if success %}
        <div class="mt-4">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">What happens next?</h6>
                    <ul class="mb-0">
                        {% if operation == "Cross-list" %}
                        <li>The child section has been moved into the parent course</li>
                        <li>Students from the child section will now see the parent course in Canvas</li>
                        <li>The parent course name may have been updated to reflect combined sections</li>
                        <li>A list of child courses has been added to the parent course syllabus</li>
                        <li>The updated status will be shown when you return to the courses list</li>
                        {% elif operation == "Un-cross-list" %}
                        <li>The section has been restored to its original course</li>
                        <li>Students will now see the original course instead of the cross-listed course</li>
                        <li>The updated status will be shown when you return to the courses list</li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
        {% else %}
        <div class="mt-4">
            <div class="card">
                <div class="card-body">
                    <h6 class="card-title">Troubleshooting</h6>
                    <ul class="mb-0">
                        <li>Check that you have the necessary permissions for this operation</li>
                        <li>Verify that the sections meet the cross-listing requirements</li>
                        <li>Ensure the parent course is unpublished and the child course is published</li>
                        <li>Check the audit logs for detailed error information</li>
                        <li>Contact your Canvas administrator if the problem persists</li>
                    </ul>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}